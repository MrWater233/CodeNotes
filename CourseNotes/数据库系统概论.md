# 二.关系数据库

## 2.1关系

| 关系的结构  | 关系结构的定义                       | 对应表中的元素 |
| ----------- | ------------------------------------ | -------------- |
| 域/域值     | 属性（列）定义的取值范围             |                |
| 基数        | 一个域中取值的个数                   |                |
| 元组        | 一行元素                             | 行/记录        |
| 笛卡尔积    | 不同域的所有取值的组合               |                |
| 关系模式    | 关系的基本结构                       | 表/标题        |
| 关系        | 关系模式的某一时刻的状态             |                |
| 属性/属性值 |                                      | 列名/列值      |
| 度/目       | 属性的个数                           |                |
| 候选码      | 一个**属性组**能唯一标识一个元素     |                |
| 主码        | 众多候选码中的一个                   |                |
| 主属性      | 候选码中的每一个属性                 |                |
| 非码属性    | 不包含在候选码中的属性               |                |
| 全码        | 关系模式所有属性都是这个候选码       |                |
| 外键        | 一个表的某一(组)属性是另一个表的主码 |                |

## 2.2关系操作

## 2.3关系完整性

###  实体完整性

> 主键属性值不为空

### 参照完整性

> 外键具有对应关系

### 用户定义完整性

> 属性的取值遵守具体应用

## 2.4关系代数

> 并相容性：1.相同目	2.每个属性有相同域
>
> 基本关系代数运算应当遵循并相容性

### 基本关系代数

#### 并(∪)

> $R∪S$
>
> 结果仍为n目关系，由既属于R关系**或**又属于S关系的元组组成
>
> <font color=red>注意并运算可以去重</font>

#### 差(-)

> $R-S$：去除R中的S的元素

#### 笛卡尔积(×)

> $R×S$：将两张表合起来，列出R、S元组的所有可能组合
>
> R×S=S×R

#### 选择(σ)

> $σ_{X_1θY_1}(R)$
>
> 这个代数意思是**将R关系中满足比较表达式的元组选择出来**
>
> 其中$X_1θY_1$为选择条件，他是一个比较表达式，θ可以为$＞，≥，＜，≤，<>$，$X_1,Y_1$为常量或者属性名，当有多个条件的用逻辑表达式连接

#### 投影(Π)

> $Π_A(R)$
>
> 将R中A属性（也可以是若干属性，用逗号分隔）选出来组成新的关系
>
> **投影后重复的元组会去掉**

#### 更名(ρ)

> $ρ_{R1}(R)$将R关系更名为R1

### 扩展关系代数

#### 交(∩)

> $R∩S$
>
> 结果仍然为n目关系，由既属于R又属于S的关系组成

#### 连接(⋈)

$R⋈S=σ_{t[A]θS[B]}(R×S)$

> 等同于做了一次笛卡尔积并做了一次选择运算

##### θ连接

> 在连接(⋈)下方加入连接条件($AθB$)
>
> 他的A和B必须为两个关系上的可比**属性组**

##### 等值连接

> A=B的θ连接

##### 自然连接

> $R⋈S=σ_{t[B]θS[B]}(R×S)$
>
> 即将两个关系相同的属性组进行连接

##### 外连接

###### 全外连接

>  保持两侧元素不丢失

###### 左右外连接

> X外连接：保持X侧元素不丢失

#### 除(÷)

$R÷S=Π_{R-S}(R)-Π_{R-S}((Π_{R-S}(R)×S)-R)$

> **使用前提条件：S的属性在R中，且R属性比S多**

$(R÷S)×S∈R$

# 三.SQL

## SELECT多表查询

> 记得先将表进行笛卡尔积运算，即在`from`后用`,`写出两张表
>
> 再在`WHERE`后跟上连接的选择条件