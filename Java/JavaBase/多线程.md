# 概念

## 进程

进程是程序的一次动态执行过程

## 线程

比进程更小的执行单位，是进程中的一个单独的顺序控制流。

它是进程中的独立运行的子任务

线程拥有共享的进程资源

# Java的多线程

## 并发

Java虚拟机允许应用程序同时执行多个执行线程，这在Java种叫做并发。

## 创建线程

- 通过继承Thread创建线程
- 通过实现Runnable接口来创建线程
- 通过实现Callable接口和Future接口来间接创建线程

## 继承Thread创建线程

### 构造方法

![image]()

### 常用方法

![image]()

`join()` 是调用A线程来帮助完成任务，参数的意思是等待时间

 通过`start()`启动线程后，系统自动调`run()`方法来执行线程

### 主线程

java程序至少有一个主线程，线程名为`main`，系统会为它自动分配`ID`，优先级为`5`，它不需要`run()`方法

### 线程的执行顺序

线程随机启动，取决于操作系统，不取决于代码`start()`顺序。

## 实现Runnable接口创建线程

- 通过覆盖`run()`方法来创建线程体

- 需要通过`Tread`包装`Runnable`实现对象来创建线程，接口中没有`start()`方法

## 实现Callable和Future创建线程

> 前两个方法都不能获取线程执行结果，JDK1.5以后就可以通过这两个接口来获取线程返回的结果

### Callable泛型接口

接口中只有一个`call()`方法 ，他是线程执行体，具有返回值。

### Future泛型接口

表示异步任务

#### 作用

任务进行中断，查询是否完成，获取结果。

####  方法

![image]()

### FutureTask类

- 通过包装`Callable`来创建对象

- 需要通过`Thread`包装来执行线程
- 可以通过`FutureTask`对象的`get()`来获取`call()`的执行结果

#### 构造方法

![image]()

## 线程的状态及控制

### 线程的状态

> java中将线程分为6个状态，状态封装在`ThreadState`枚举中，这代表虚拟机的状态

> 线程在操作系统中执行的状态，线程可以分为7种状态

- 新建态(NEW)

  创建线程但没有调用`start()`

- 就绪态也可称为可运行态(RUNABLE)

  调用`start()`方法以后

- 运行态

  分配到CPU之后的状态

- 等待状态

  调用`wait()`方法线程就进入等待状态

  需要调用`notify()`或者`notifyAll()`才能被唤醒，第二个方法能唤醒所有线程

- 休眠状态

  调用`sleep()`方法以后

- 阻塞状态

   线程在运行状态下发出输入/输出请求

- 死亡状态

  `run()`方法执行玩完毕

#### 线程控制

1. 线程启动--start()方法

2. 线程休眠--sleep()方法

3. 线程让步--yield()方法

4. 线程等待--wait()方法

5. 线程唤醒--notify()、notifyAll()方法

6. 暂停线程

   使用`suspend()`

7. 线程加入--join()方法

8. 线程状态检查--isAlive()方法

9. 结束线程

   `Thread.stop()`方法，但是不推荐用，已经被作废

   以下有3种结束正在运行的线程方法

   1. fs
   2. dsa
   3. 中断线程，使用`interrupt()`来中断


### 线程优先级

#### 优先级的等级



#### 优先级的修改

| 方法                                              | 方法       |
| ------------------------------------------------- | ---------- |
| `public final void setPriority(int new Priority)` | 设置优先级 |
|                                                   | 获取优先级 |

### 守护线程

#### 守护线程的判断

`public final boolean isDaemon() `

#### 设置守护线程

`public final void setDaemon(boolean on)`

- 如果`on`为`true`那么设置为守护线程

- 如果`on`为`false`那么取消设置守护线程

### 线程组

> 可以把一组线程作为单个对象进行统一处理和维护，可以对所有线程进行同时操作

#### 构造方法

| 方法                                                 | 作用                               |
| ---------------------------------------------------- | ---------------------------------- |
| `public ThreadGroup(String name)`                    | 创建名为name的线程组对象           |
| `public ThreadGroup(ThreadGroup parent,String name)` | 创建具有给定父组和名称的线程组对象 |

#### 常用方法

![image]()

