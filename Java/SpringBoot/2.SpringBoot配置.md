# 1.é…ç½®æ–‡ä»¶

- SpringBootä½¿ç”¨çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åå›ºå®š

  - application.properties
  - appllication.yml

  é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼

  é…ç½®æ–‡ä»¶ä½¿ç”¨çš„æ ‡è®°è¯­è¨€ï¼š

  ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼šXMLï¼Œå®ä¾‹å¦‚ä¸‹

  ```xml
  <server>
      <port>8081</port>
  </server>
  ```

  æ–°çš„é…ç½®æ–‡ä»¶ï¼šYAMLï¼Œæ˜¯ä¸€ç§**ä»¥æ•°æ®ä¸ºä¸­å¿ƒ**çš„æ ‡è®°è¯­è¨€ï¼Œå®ä¾‹å¦‚ä¸‹

  ```yaml
  server:
  	port: 8888
  ```

  

# 2.YAMLè¯­æ³•

## 1.åŸºæœ¬è¯­æ³•

`k:(ç©ºæ ¼)v:`è¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹

ä»¥ç©ºæ ¼çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼›åªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€å±‚çº§

```yaml
server:
	port: 8081
	path: /hello
```

å±æ€§å’Œå€¼å¤§å°å†™æ•æ„Ÿ



## 2.å€¼çš„å†™æ³•

### å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰

`k: v: å­—é¢é‡çš„å€¼ç›´æ¥å†™`

å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨å¼•å·

- ""ï¼šä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦
- ''ï¼šä¸ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦

### å¯¹è±¡/Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š

`k: v: åœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼Œæ³¨æ„ç¼©è¿›`

è¿˜æ˜¯é”®å€¼å¯¹çš„æ–¹å¼

```yaml
friend:
	lastName: zhangsan
	age: 20
```

è¡Œå†…å†™æ³•

```yaml
friend: {lastName: zhangsan,age: 18}
```

### æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š

ç”¨`- å€¼`è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ 

```yaml
pets: 
	- cat
	- dog
	- pig
```

è¡Œå†…å†™æ³•

```yaml
pets: [cat,dog,pig]
```



# 3.é…ç½®æ–‡ä»¶å€¼çš„æ³¨å…¥

é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰ï¼š

```yaml
person:
  lastName: zhangsan
  age: 18
  boss: false
  birth: 2017/12/12
  maps: {k1: v1,k2: 12}
  lists:
    - lisi
    - zhaoliu
  dog:
    name: å°ç‹—
    age: 2
```

é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰ï¼š

```properties
#é…ç½®æ–‡ä»¶
#éœ€è¦å°†è®¾ç½®ç¼–ç ä¸­çš„é€æ˜asciiå¼€å¯ï¼Œä¸ç„¶ä¸­æ–‡ä¼šå‡ºç°ä¹±ç 
person.last-name=å¼ ä¸‰
person.age=18
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=dog
person.dog.age=15
```

é…ç½®æ–‡ä»¶ä¸­`-n/_n`ç­‰åŒäº`N`

JavaBean:

```java
public class Dog {
    private String name;
    private Integer age;
}
```

é€šè¿‡@ConfigurationPropertiesè·å–ï¼š

```java
/**
 * å°†é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€ä¸ªå€¼æ˜ å°„åˆ°ç»„ä»¶ä¸­
 * @ConfigurationProperties(prefix = "person"):å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ç›¸å…³é…ç½®è¿›è¡Œç»‘å®šï¼Œé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼
 *      prefix = "person"ï¼šé…ç½®æ–‡ä»¶ä¸­çš„å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œæ˜ å°„
 *
 * åªæœ‰ç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨å®¹å™¨ä¸­æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼Œæ‰€ä»¥è¦åŠ åŠ å…¥@Component
 */
@Component
@ConfigurationProperties(prefix = "person")
public class Person {

    private String lastName;
    private Integer age;
    private Boolean boss;
    private Date birth;
    private Map<String ,Object> maps;
    private List<Object> lists;
    private Dog dog;
}
```

é€šè¿‡@Valueè·å–

```java
@Component
public class Person {
    @Value("${person.last-name}")
    private String lastName;
    @Value("#{11*2}")
    private Integer age;
    @Value("true")
    private Boolean boss;
    private Date birth;
    private Map<String ,Object> maps;
    private List<Object> lists;
    private Dog dog;
}
```



æˆ‘ä»¬å¯ä»¥å¸¦å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åç¼–å†™é…ç½®å°±æœ‰æç¤º

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
```

## 1.@Vauleè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ

|                                | @ConfigurationProperties | @Vaule       |
| ------------------------------ | ------------------------ | ------------ |
| åŠŸèƒ½                           | æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ | ä¸€ä¸ªä¸€ä¸ªæŒ‡å®š |
| æ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•ï¼‰           | æ”¯æŒ                     | ä¸æ”¯æŒ       |
| SpElï¼ˆå¦‚`#{11*2}`ï¼‰            | ä¸æ”¯æŒ                   | æ”¯æŒ         |
| JSR303æ•°æ®æ ¡éªŒï¼ˆ`@Validated`ï¼‰ | æ”¯æŒ                     | ä¸æ”¯æŒ       |
| å¤æ‚ç±»å‹å°è£…ï¼ˆMapç­‰ï¼‰          | æ”¯æŒ                     | ä¸æ”¯æŒ       |

- æ¾æ•£ç»‘å®šï¼šå¦‚é…ç½®æ–‡ä»¶ä¸­`-n`ç­‰åŒäº`N`

å¦‚æœåœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­åªæ˜¯æƒ³è·å–æŸä¸ªé…ç½®æ–‡ä»¶çš„å€¼ï¼Œå°±ç”¨@Value

å¦‚æœä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œå°±ç›´æ¥ä½¿ç”¨@ConfigurationProperties

## 2.é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥æ•°æ®æ ¡éªŒ

```java
@Component
@ConfigurationProperties(prefix = "person")
@Validated
public class Person {
    //@Value("${person.last-name}")
    @Email
    private String lastName;
    //@Value("#{11*2}")
    private Integer age;
    //@Value("true")
    private Boolean boss;
    private Date birth;
    private Map<String ,Object> maps;
    private List<Object> lists;
    private Dog dog;
}
```

## 3.@PropertySourceå’Œ@ImportResource

### @PropertySource

>  åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨å…¨å±€application.propertiesæ–‡ä»¶ä¸­é…ç½®äº†

åœ¨resourcesä¸‹æ–°å»ºä¸€ä¸ªperson.propertiesï¼Œå†™å…¥

```properties
person.last-name=å¼ ä¸‰
person.age=18
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=dog
person.dog.age=15
```

ä½¿ç”¨@PropertySource

```java
Component
@PropertySource(value = {"classpath:person.properties"})
@ConfigurationProperties(prefix = "person")
public class Person {
    private String lastName;
    private Integer age;
    private Boolean boss;
    private Date birth;
    private Map<String ,Object> maps;
    private List<Object> lists;
    private Dog dog;
}
```

**æ³¨æ„@ConfigurationPropertiesä¸åº”è¯¥åˆ é™¤ï¼Œå› ä¸ºå®ƒæŒ‡æ˜äº†é…ç½®æ–‡ä»¶ä¸­çš„å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œæ˜ å°„**

é»˜è®¤é…ç½®æ–‡ä»¶æ‰§è¡Œé¡ºåºapplication.properties>application.yml>å±€éƒ¨properties

### @ImportResource

> å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ç”Ÿæ•ˆ

SpringBooté‡Œé¢æ²¡æœ‰Springé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«

æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œéœ€è¦æŠŠ@ImportResourceæ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š

```java
@ImportResource(locations = {"classpath:beans.xml"})
```

~~beans.xml(SpringBootä¸æ¨èè¯¥åšæ³• )~~

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="helloService" class="com.learning.springboot.service.HelloService"></bean>
</beans>
```



SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼ˆå…¨æ³¨è§£ï¼‰

1. é…ç½®ç±»===Springä¸­é…ç½®æ–‡ä»¶
2. ä½¿ç”¨@beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶

```java
/**
 * @Configurationï¼šæŒ‡æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œæ›¿ä»£ä¹‹å‰çš„Springé…ç½®æ–‡ä»¶
 *
 * Springä¸­ç”¨<bean></bean>æ ‡ç­¾æ·»åŠ ç»„ä»¶ï¼Œè¿™é‡Œç”¨@Beanæ›¿ä»£
 */
@Configuration
public class MyAppConfig {
    //å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å
    @Bean
    public HelloService helloService(){
        return new HelloService();
    }
}
```

# 4.é…ç½®æ–‡ä»¶å ä½ç¬¦

## 1.éšæœºæ•°

`{random.int}` `{random.value}` `{random.long}` `{random.int(10)}` `{random.int[1024,65536]}` 

## 2.å ä½ç¬¦

è·å–ä¹‹å‰è·å–çš„å€¼ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®è¯¥å€¼ï¼Œå¯ä»¥ä½¿ç”¨å†’å·è®¾ç½®é»˜è®¤å€¼

````properties
person.last-name=å¼ ä¸‰${random.uuid}}
person.age=${random.int}
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=${person.hello:hello}_dog
person.dog.age=15
````

# 5.Profile

> å¯¹ä¸åŒå¼€å‘ç¯å¢ƒæä¾›ä¸åŒçš„é…ç½®åŠŸèƒ½çš„æ”¯æŒ

## 1.å¤šprofileæ–‡ä»¶

åˆ›å»ºå¤šä¸ªpropertiesæ–‡ä»¶çš„æ—¶å€™é»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½®

## 2.ymlæ”¯æŒå¤šæ–‡æ¡£å¿«æ–¹å¼

åœ¨ymlæ–‡ä»¶ä¸­å†™å…¥`---`æ¥åˆ›å»ºæ–‡å—

åœ¨ä¸åŒæ–‡æ¡£åº“å•Šä¸­ä½¿ç”¨

```yaml
spring:
	profile: dev
```

æ¥æŒ‡å®šå¼€å‘ç¯å¢ƒ

å†åœ¨é…ç½®æ–‡ä»¶å¼€å¤´ä½¿ç”¨

```yaml
spring:
	profiles:
		active: dev
```

æ¥æ¿€æ´»

## 3.æ¿€æ´»æŒ‡å®šprofile

1. åœ¨é…ç½®æ–‡ä»¶application.propertiesä¸­å†™å…¥spring.profiles=devæ¥æŒ‡å®šé…ç½®æ–‡ä»¶

   è¯¥devæŒ‡application-dev.propertiesæ–‡ä»¶

2. ymalé…ç½®

3. å‘½ä»¤è¡Œï¼š

   `java -jar jaråŒ…å --spring.profile.active=dev`

   ä¹Ÿå¯ä»¥åœ¨æµ‹è¯•çš„æ—¶å€™ç›´æ¥ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°(Program arguments)`--spring.profile.active=dev`

4. è™šæ‹Ÿæœºå‚æ•°

   VM optionsï¼š`-Dspring-profile.active=dev`

# 6.é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®

springbootå¯åŠ¨ä¼šæ‰«æä¸€ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºspring booté»˜è®¤é…ç½®æ–‡ä»¶

ä¼˜å…ˆçº§**ä»é«˜åˆ°ä½**ï¼š

1. file.../config/
2. file.../
3. classpath:/config/
4. classpath:/

<font color=red>æ³¨æ„ï¼š</font>

1. spring bootä¼šä»å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯é«˜ä¼˜å…ˆçº§ä¼š**è¦†ç›–**ä½ä¼˜å…ˆçº§ï¼Œè¿™æ ·å°±å¯ä»¥å½¢æˆ**äº’è¡¥é…ç½®**(é«˜ä¼˜å…ˆçº§æ²¡æœ‰çš„é…ç½®ä¼šè‡ªåŠ¨ä½¿ç”¨ä½ä¼˜å…ˆçº§çš„é…ç½®)

2. fileä¸ºå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•



==è¿˜å¯ä»¥ä½¿ç”¨--spring.config.loacatonæ¥æ”¹å˜é»˜è®¤é…ç½®ä½ç½®==

é¡¹ç›®æ‰“åŒ…å·ä»¥åå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶ä¼šå…±åŒèµ·ä½œç”¨ï¼Œå½¢æˆäº’è¡¥é…ç½®ã€‚

# 7.å¤–éƒ¨é…ç½®çš„åŠ è½½é¡ºåº

SpringBootä¹Ÿå¯ä»¥ä»ä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼Œä¼˜å…ˆçº§**ä»é«˜åˆ°ä½**ï¼ˆäº’è¡¥é…ç½®ï¼‰:

1. <font color=red>å‘½ä»¤è¡Œå‚æ•°</font>

   å¤šä¸ªå‚æ•°ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œç”¨`--`å¼€å¤´

2. æ¥è‡ªjava:comp/envçš„JNDIå±æ€§

3. Javaç³»ç»Ÿå±æ€§ï¼ˆSystem.getProperties()ï¼‰

4. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡

5. RandomValuePropertySourceé…ç½®çš„ random.*å±æ€§å€¼<font color=red>

6. <font color=red>jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</font>

7. <font color=red>jaråŒ…å†…éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</font>

8. <font color=red>jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</font>

9. <font color=red>jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</font>

10. @Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource

11. é€šè¿‡SpringApplication.setDefaultPropertioesæŒ‡å®šçš„é»˜è®¤å±æ€§

==ç”±jaråŒ…å¤–ï¼ˆè·ŸjaråŒ…åŒä¸€è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ï¼‰å‘jaråŒ…å†…è¿›è¡Œå¯»æ‰¾==

==ä¼˜å…ˆåŠ è½½å¸¦profile==

# 8.Spring Bootè‡ªåŠ¨é…ç½®åŸç†

[é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§](https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/common-application-properties.html)

## **1.è‡ªåŠ¨é…ç½®åŸç†**

1. Spring Bootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼ˆä¸»æ–¹æ³•ï¼‰ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½`@EnableAutoConfiguration`

2. `@EnableAutoConfiguration`ä½œç”¨

   - åˆ©ç”¨`EnableAutoConfigurationImportSelector`ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶

   - å¯ä»¥æŸ¥çœ‹`selectImports()`æ–¹æ³•çš„å†…å®¹

   - `List<String> configurations = this.getCandidateConfigurations(annotationMetadata, attributes);`è·å–å€™é€‰çš„é…ç½®

     - ```java
       SpringFactoriesLoader.loadFactoryNames()
       æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹çš„  META-INF/Spring.factories
       æŠŠæ‰«æåˆ°çš„è¿™äº›æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡
       ä»propertiesä¸­è·å–åˆ°EnableAutoConfiguration.classç±»ï¼ˆç±»åï¼‰å¯¹åº”çš„å€¼ï¼ŒæŠŠä»–ä»¬æ·»åŠ åˆ°å®¹å™¨ä¸­
       ```

       ==å°†ç±»è·¯å¾„ä¸‹`META-INF/Spring.factories`é‡Œé¢é…ç½®çš„æ‰€æœ‰`EnableAutoConfiguration`çš„å€¼åŠ å¦‚åˆ°äº†å®¹å™¨ä¸­==

       æ¯ä¸€ä¸ªxxxAtutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½®

3.  æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½

4. æ ¹æ®ç±»ä¸Šçš„æ³¨è§£åˆ¤æ–­å†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆ
5. ä¸€æ—¦è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼Œé…ç½®çš„å±æ€§éƒ½æ¥è‡ªäºè¿™ä¸ªåŠŸèƒ½çš„propertiesç±»ï¼Œè€Œpropertiesç±»é‡Œé¢çš„å±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„

**ç²¾é«“**

1. SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»
2. æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»
3. æˆ‘ä»¬å†æ¥çœ‹è‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼Œåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®
4. ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼

- xxxAutoConfigurationï¼šè‡ªåŠ¨é…ç½®ç±»

  ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé€šè¿‡ğŸ‘‡æ¥é…ç½®

- xxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„å±æ€§ï¼Œè°ƒç”¨äº†é…ç½®æ–‡ä»¶æ¥é…ç½®ç±»é‡Œé¢çš„å±æ€§

## 2.ç»†èŠ‚

### @Conditionalæ´¾ç”Ÿæ³¨è§£

ä½œç”¨ï¼šå¿…é¡»æ˜¯`@Conditional`æŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰èƒ½ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œæˆ–è€…é…ç½®ç±»æ‰èƒ½ç”Ÿæ•ˆ

| @Conditionalæ‰©å±•æ³¨è§£            | ä½œç”¨ï¼ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šæ¡ä»¶ï¼‰                 |
| ------------------------------- | ------------------------------------------------ |
| @ConditionalOnJava              | ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚                       |
| @ConditionalOnBean              | å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBeanï¼›                             |
| @ConditionalOnMissingBean       | å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanï¼›                           |
| @ConditionalOnExpression        | æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š                               |
| @ConditionalOnClass             | ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»                                 |
| @ConditionalOnMissingClass      | ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»                               |
| @ConditionalOnSingleCandidate   | å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…è¿™ä¸ªBeanæ˜¯é¦–é€‰Bean |
| @ConditionalOnProperty          | ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼                   |
| @ConditionalOnResource          | ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶                     |
| @ConditionalOnWebApplication    | å½“å‰æ˜¯webç¯å¢ƒ                                    |
| @ConditionalOnNotWebApplication | å½“å‰ä¸æ˜¯webç¯å¢ƒ                                  |
| @ConditionalOnJndi              | JNDIå­˜åœ¨æŒ‡å®šé¡¹                                   |

**è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šæ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ**

#### åˆ¤æ–­è‡ªåŠ¨é…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆ

åœ¨ä¸»é…ç½®é—®å®¶ä¸­ä¸­åŠ å…¥`debug=true`æ¥æŸ¥çœ‹ç”Ÿæ•ˆçš„é…ç½®ç±»